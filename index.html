<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <!-- production version, optimized for size and speed -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment-with-locales.min.js" integrity="sha256-AdQN98MVZs44Eq2yTwtoKufhnU+uZ7v2kXnD5vqzZVo=" crossorigin="anonymous"></script>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
</head>

<body>
    <div id="app">
        <div class="flex h-screen">
            <div class="m-auto text-center">
            	<div class="flex mb-4">
				  <div class="w-1/2 px-4">
                    <input v-model="pills" autocomplete="off" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" type="text" placeholder="Antal">
                    <label class="">om</label>

                    <div class="flex py-2">
                        <div class="w-1/3 px-3 pretty p-default p-round">
                            <input v-model="type" autocomplete="off" value="1" type="radio" name="radio1">
                            <div class="state">
                                <label>Dagen</label>
                            </div>
                        </div>
                        <div class="w-1/3 px-3 pretty p-default p-round">
                            <input v-model="type" autocomplete="off" value="7" type="radio" name="radio1">
                            <div class="state">
                                <label>Ugen</label>
                            </div>
                        </div>
                        <div class="w-1/3 px-3 pretty p-default p-round">
                            <input v-model="type" autocomplete="off" value="30" type="radio" name="radio1">
                            <div class="state">
                                <label>Måneden</label>
                            </div>
                        </div>
                    </div>

					<div class="py-2">
						<input v-model="pack" autocomplete="off" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" type="text" placeholder="I en pakke">

                        <p class="text-xl italic">Anvendelse til {{ days }} dage</p>
					</div>
                </div>

                <div class="w-1/2 px-4">
                    <div>
                        <input v-model="date" autocomplete="off" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" autofocus type="text" placeholder="Dato">
                        <p class="text-xl italic">{{ daysSince }}</p>        
                    </div>
                
                    <div class="py-2">
                        <input v-model="interval" autocomplete="off" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500" type="text" placeholder="Interval">
                        <p v-if="daysLeft && interval" :class="{'text-green-400': daysLeft < 0, 'text-red-400': daysLeft > 0}" class="text-xl italic">{{ daysLeft > 0 ? daysLeft + ' dage tilbage' : Math.abs(daysLeft) + ' dage siden' }}</p>
                    </div>
                </div>
				</div>
                <div>
                    <button @click="reset" class="bg-gray-200 hover:bg-gray-400 text-gray-500 py-2 px-4 rounded inline-flex items-center">Reset</button>
                </div>
            </div>
        </div>
    </div>ª

    <script type="text/javascript">
        var app = new Vue({
            el: '#app',
            data: {
                pills: null,
                type: null,
                pack: null,
                date: null,
                interval: null,
            },
            computed: {
                daysSince: function() {
                    days = moment().diff(moment(this.date, 'DD-MM-YYYY'), 'days')
                    return days > 0 ? days + ' dage siden' : Math.abs(days ? days : 0) + ' dage til'
                },
                days: function() {
                	input = (this.pack / this.pills) * this.type
                    return input ? Math.round(input * 100) / 100 : null
                },
                daysLeft: function() {
                    return this.interval - days
                }
            },
            methods: {
                reset: function() {
                    this.pills = null
                    this.type = null
                    this.pack = null
                    this.date = null
                    this.interval = null
                }
            }
        })
    </script>
</body>

</html>
